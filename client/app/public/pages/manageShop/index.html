<template name="publicPageManageShop">
  {{#let _categories=(state.get 'categories') _products=(state.get 'products')}}
  <div class="container py-2">


    <div class="row">
      <div class="col-md-6">
        <h4 class="fw-bold">Kategoriler</h4>
        <hr>
        <form id="brdCategoryCreateForm">
          <div class="form-group">
            <label for="productNameInput">Kategori İsmi :</label>
            <input type="text" class="form-control" id="productNameInput" placeholder="Kategori ismini giriniz.">
          </div>
          <br>
          <div class="form-group">
            <label for="categoryParentSelect">Üst Kategori :</label>
            <select class="form-control" id="categoryParentSelect">
              <option value="default">Üst Kategori Yok</option>
              {{#each _categories}}
              <option value="{{_id}}" data-level="{{level}}">{{name}}</option>
              {{/each}}
            </select>
          </div>
          <br>
          <button type="submit" class="btn btn-success">Kategori Ekle</button>
        </form>

        <hr>
        <ul class="list-group">
          {{#each _categories}}
          <li class="list-group-item {{#if eq _id _selectedCategory._id}}active{{/if}}">
            {{name}}
           <button class="btn btn-danger btn-sm deletebtn categoryDel"><i class="fas fa-trash"></i></button>
          </li>
          {{/each}}
        </ul>
      </div>

      <div class="col-md-6">
        <h4 class="fw-bold">Ürünler</h4>
        <hr>
        <form id="brdProductCreateForm">
          <div class="form-group">
            <label for="productNameInput">Ürün İsmi :</label>
            <input type="text" class="form-control" id="productNameInput" placeholder="Ürün ismini giriniz.">
          </div>
          <br>
          <div class="form-group">
            <label for="productCategorySelect">Kategori :</label>
            <select class="form-control" id="productCategorySelect">
              {{#each _categories}}
              <option value="{{_id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>
          <br>
          <div class="form-group">
            <label for="productImageLink">Ürün Resmi :</label>
            <input type="text" class="form-control" id="productImageLink" placeholder="Ürün resim linkini giriniz.">
          </div>
          <br>
          <button type="submit" class="btn btn-success">Ürünü Ekle</button>
        </form>
        <hr>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">id</th>
              <th scope="col">Ürün İsmi</th>
              <th scope="col">Kategori</th>
              <th scope="col">Ürün Resmi</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody>
            {{#each _products}}
            <tr>
              <td>{{add @index}}</td>
              <td>{{name}}</td>
              <td>
                <!-- {{categoryId}} -->
                {{#each _categories}}
                {{#if eq _id ../categoryId}}
                {{name}}           
                {{/if}}
                {{/each}}
              </td>
              <td style ="word-break:break-all;">{{imageUrl}}</td>
              <td><button class="btn btn-danger btn-sm deletebtn productDel"><i class="fas fa-trash"></i></button></td>
            </tr>               
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>

  </div>

  {{/let}}
</template>